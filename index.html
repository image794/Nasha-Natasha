<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ö—Ç–æ —Ö–æ—á–µ—Ç —Å—Ç–∞—Ç—å –ù–∞—Ç–∞—à–µ–π?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: #02030b url("bg.jpg") center/cover no-repeat fixed;
      color: #f5f5f5;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: env(safe-area-inset-top, 0px) 10px env(safe-area-inset-bottom, 12px);
    }

    .game-wrapper {
      width: min(430px, 100vw);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* –ø—Ä—è—á–µ–º –ø–∞–Ω–µ–ª—å –¥–æ —Å—Ç–∞—Ä—Ç–∞ */
    .start-hidden .top-bar {
      opacity: 0;
      pointer-events: none;
    }

    .game-card {
      width: 100%;
      max-height: 100%;
      background: rgba(5, 6, 18, 0.9);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      padding: 16px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 13px;
      opacity: 0.9;
      gap: 6px;
    }

    .question-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow-y: auto;
    }

    .question-number {
      font-size: 13px;
      opacity: 0.8;
    }

    .question-text {
      font-size: 18px;
      font-weight: 600;
      line-height: 1.3;
    }

    .question-image {
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .question-image img {
      width: 100%;
      display: block;
    }

    .answer-btn {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      padding: 10px 12px;
      background: rgba(18, 21, 45, 0.95);
      color: #fff;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .answer-btn.correct {
      background: #1b5e20;
      border-color: #66bb6a;
    }

    .answer-btn.wrong {
      background: #b71c1c;
      border-color: #ef5350;
    }

    .answer-btn.disabled {
      pointer-events: none;
      opacity: 0.7;
    }

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }

    .overlay-screen {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .overlay-card {
      background: rgba(3,4,15,0.93);
      padding: 22px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.15);
      text-align: center;
      width: 100%;
    }

    .primary-btn {
      border-radius: 999px;
      padding: 10px 18px;
      background: linear-gradient(135deg, #ffcc33, #ff9800);
      border: none;
      cursor: pointer;
      font-weight: 600;
    }

    .hidden { display: none; }
  </style>
</head>

<body>
  <div class="game-wrapper start-hidden">
    <audio id="bg-music" src="music.mp3" loop></audio>

    <div class="game-card">

      <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
      <div id="start-screen" class="overlay-screen">
        <div class="overlay-card">
          <div class="overlay-title" style="font-size:22px; font-weight:700;">–ö—Ç–æ —Ö–æ—á–µ—Ç —Å—Ç–∞—Ç—å –ù–∞—Ç–∞—à–µ–π?</div>
          <div class="overlay-subtitle" style="opacity:0.85; margin-bottom:12px;">
            –û—Ç–≤–µ—Ç—å –Ω–∞ 20 –≤–æ–ø—Ä–æ—Å–æ–≤. –£ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.
          </div>
          <button id="start-btn" class="primary-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
      </div>

      <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
      <div class="top-bar">
        <span id="question-counter">–í–æ–ø—Ä–æ—Å 1 / 20</span>
        <span>–û—á–∫–∏: <span id="score-value">0</span></span>

        <!-- –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ -->
        <button id="mute-btn" style="
          background:none;border:none;color:#fff;font-size:20px;cursor:pointer;">üîä</button>
      </div>

      <!-- –í–æ–ø—Ä–æ—Å -->
      <div class="question-area">
        <div id="question-label" class="question-number">–í–æ–ø—Ä–æ—Å 1</div>
        <div id="question-text" class="question-text">
          –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
        </div>

        <div id="question-image-wrapper" class="question-image" style="display:none;">
          <img id="question-image" src="" alt="img">
        </div>
      </div>

      <!-- –û—Ç–≤–µ—Ç—ã -->
      <div id="answers-container"></div>

      <!-- Bottom -->
      <div class="bottom-bar">
        <div id="status-text" class="status-text"></div>
        <button id="next-btn" class="primary-btn hidden">–î–∞–ª–µ–µ</button>
      </div>

      <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
      <div id="end-screen" class="overlay-screen hidden">
        <div class="overlay-card">
          <div style="font-size:22px; font-weight:700;">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</div>
          <div style="margin:10px 0;">
            –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="final-score">0</span> –∏–∑ <span id="final-total">20</span>
          </div>
          <div id="result-note" style="opacity:0.85; margin-bottom:16px;"></div>
          <button id="restart-btn" class="primary-btn">–ò–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑</button>
        </div>
      </div>

    </div>
  </div>

<script>
/* ---------------------------- QUESTIONS ---------------------------- */

const questions = [
  {
    type: "text",
    question: "–°—Ç–æ–ª–∏—Ü–∞ –¢—É—Ä—Ü–∏–∏ ‚Äî —ç—Ç–æ‚Ä¶",
    options: ["–°—Ç–∞–º–±—É–ª", "–ù–∞—Ç–∞—à–∞", "–ò–∑–º–∏—Ä", "–ë—É—Ä—Å–∞"],
    correctIndex: 1
  },
  {
    type: "text",
    question: "–ö–∞–∫–æ–π –ø—Ä–æ–ª–∏–≤ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ï–≤—Ä–æ–ø—É –∏ –ê–∑–∏—é –≤ —Ä–∞–π–æ–Ω–µ –°—Ç–∞–º–±—É–ª–∞?",
    options: ["–î–∞—Ä–¥–∞–Ω–µ–ª–ª—ã", "–ì–∏–±—Ä–∞–ª—Ç–∞—Ä", "–ù–∞—Ç–∞—à–∞", "–ú–∞—Ä–º–∞—Ä—Å–∫–∏–π"],
    correctIndex: 2
  },
  {
    type: "image",
    question: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–∞ –∑–Ω–∞–º–µ–Ω–∏—Ç–∞—è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –°—Ç–∞–º–±—É–ª–∞?",
    image: "Natasha.jpg",
    options: ["–°—É–ª—Ç–∞–Ω–∞—Ö–º–µ—Ç", "–ì–∞–ª–∞—Ç—Å–∫–∞—è –±–∞—à–Ω—è", "–ù–∞—Ç–∞—à–∞", "–¢–æ–ø–∫–∞–ø—ã"],
    correctIndex: 2
  },
  {
    type: "text",
    question: "–°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤ –æ–¥–Ω–æ–º —á–∞—Å–µ?",
    options: ["30", "45", "–ù–∞—Ç–∞—à–∞", "90"],
    correctIndex: 2
  }
];

const totalQuestions = questions.length;

/* ---------------------------- DOM ELEMENTS ---------------------------- */

const startScreen = document.getElementById("start-screen");
const endScreen = document.getElementById("end-screen");
const questionText = document.getElementById("question-text");
const questionLabel = document.getElementById("question-label");
const questionCounter = document.getElementById("question-counter");
const questionImageWrapper = document.getElementById("question-image-wrapper");
const questionImage = document.getElementById("question-image");
const answersContainer = document.getElementById("answers-container");
const statusText = document.getElementById("status-text");
const nextBtn = document.getElementById("next-btn");
const scoreValue = document.getElementById("score-value");
const finalScore = document.getElementById("final-score");
const finalTotal = document.getElementById("final-total");
const resultNote = document.getElementById("result-note");

const music = document.getElementById("bg-music");
const muteBtn = document.getElementById("mute-btn");

/* ---------------------------- GAME LOGIC ---------------------------- */

let currentIndex = 0;
let score = 0;
let answered = false;

function playMusic() {
  music.volume = 0.4;
  music.play().catch(()=>{});
}

muteBtn.addEventListener("click", () => {
  music.muted = !music.muted;
  muteBtn.textContent = music.muted ? "üîá" : "üîä";
});

document.getElementById("start-btn").addEventListener("click", () => {
  document.querySelector(".game-wrapper").classList.remove("start-hidden");
  startScreen.classList.add("hidden");
  resetGame();
  renderQuestion();
  playMusic();
});

document.getElementById("restart-btn").addEventListener("click", () => {
  endScreen.classList.add("hidden");
  resetGame();
  renderQuestion();
  playMusic();
});

nextBtn.addEventListener("click", () => {
  if (currentIndex < totalQuestions - 1) {
    currentIndex++;
    renderQuestion();
  } else {
    showEndScreen();
  }
});

function resetGame() {
  currentIndex = 0;
  score = 0;
  scoreValue.textContent = score;
  answered = false;
  nextBtn.classList.add("hidden");
}

function renderQuestion() {
  const q = questions[currentIndex];
  answered = false;

  questionCounter.textContent = `–í–æ–ø—Ä–æ—Å ${currentIndex + 1} / ${totalQuestions}`;
  questionLabel.textContent = `–í–æ–ø—Ä–æ—Å ${currentIndex + 1}`;
  questionText.textContent = q.question;

  if (q.type === "image") {
    questionImageWrapper.style.display = "block";
    questionImage.src = q.image;
  } else {
    questionImageWrapper.style.display = "none";
  }

  answersContainer.innerHTML = "";
  const labels = ["A", "B", "C", "D"];

  q.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.className = "answer-btn";
    btn.innerHTML = `<span>${labels[i]}</span> ${opt}`;
    btn.addEventListener("click", () => onAnswer(btn, i));
    answersContainer.appendChild(btn);
  });

  statusText.textContent = "";
  nextBtn.classList.add("hidden");
}

function onAnswer(btn, i) {
  if (answered) return;
  answered = true;

  const q = questions[currentIndex];
  const all = answersContainer.querySelectorAll(".answer-btn");

  all.forEach(b => b.classList.add("disabled"));

  if (i === q.correctIndex) {
    btn.classList.add("correct");
    score++;
    scoreValue.textContent = score;
    statusText.textContent = "–í–µ—Ä–Ω–æ!";
  } else {
    btn.classList.add("wrong");
    const correctBtn = all[q.correctIndex];
    correctBtn.classList.add("correct");
    statusText.textContent = "–ù–µ–≤–µ—Ä–Ω–æ!";
  }

  nextBtn.classList.remove("hidden");
}

function showEndScreen() {
  finalScore.textContent = score;
  finalTotal.textContent = totalQuestions;

  const r = score / totalQuestions;
  if (r === 1) resultNote.textContent = "–¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è –ù–∞—Ç–∞—à–∞ üíõ";
  else if (r >= 0.7) resultNote.textContent = "–û—á–µ–Ω—å –±–ª–∏–∑–∫–æ –∫ –ù–∞—Ç–∞—à–µ!";
  else resultNote.textContent = "–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!";

  endScreen.classList.remove("hidden");
}

</script>

</body>
</html>
